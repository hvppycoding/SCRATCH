<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Wrap Clipboard HTML in &lt;code&gt;</title>
</head>
<body>
  <button onclick="wrapClipboardHtml()">ğŸ“‹ Wrap clipboard HTML with &lt;code&gt;</button>
  <p style="font-size: 0.9em; color: gray;">ì´ ë¸Œë¼ìš°ì € íƒ­ì´ í¬ì»¤ìŠ¤ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</p>

  <script>
    async function wrapClipboardHtml() {
      if (!navigator.clipboard.read) {
        alert("ì´ ë¸Œë¼ìš°ì €ëŠ” clipboard.read()ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        return;
      }
      if (!document.hasFocus()) {
        alert("ë¸Œë¼ìš°ì € íƒ­ì— í¬ì»¤ìŠ¤ë¥¼ ë¨¼ì € ì£¼ì„¸ìš”.");
        return;
      }

      try {
        const items = await navigator.clipboard.read();
        for (const item of items) {
          if (item.types.includes("text/html")) {
            const blob = await item.getType("text/html");
            const html = await blob.text();

            const wrapped = `<code>${html}</code>`;

            await navigator.clipboard.write([
              new ClipboardItem({
                "text/html": new Blob([wrapped], { type: "text/html" }),
                "text/plain": new Blob([html], { type: "text/plain" })
              })
            ]);

            alert("í´ë¦½ë³´ë“œ HTMLì´ <code>ë¡œ ê°ì‹¸ì¡ŒìŠµë‹ˆë‹¤.");
            return;
          }
        }
        alert("í´ë¦½ë³´ë“œì— HTML í˜•ì‹ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
      } catch (err) {
        console.error(err);
        alert("í´ë¦½ë³´ë“œ ì ‘ê·¼ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: " + err.message);
      }
    }
  </script>
</body>
</html>
